<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./files/style.css">

<script type="text/javascript" src="./files/jquery-3.1.0.js"></script>
<script type="text/javascript" src="./files/jquery-ui.js"></script>
<script type="text/javascript">

/*
 * This work by http://www.elated.com is licensed under a Creative Commons Attribution 3.0 Unported License (http://creativecommons.org/licenses/by/3.0/)
 * Saved from url=(0131)http://www.elated.com/res/File/articles/development/javascript/jquery/drag-and-drop-with-jquery-your-essential-guide/card-game.html
 **/
 
$(init);

function init() {

	var size = 7;
	for (var y = 0; y < size; y++) {
		for (var x = 0; x < size; x++) {
			$('<div>' + (y*size + x + 1) + '</div>')
				.data('point', {x : x, y : y})
				.appendTo('#cardSlots');
		}
		// $('<div class="next-line">').appendTo('#cardSlots');
	}
	
	for (var x = 1; x <= 20; x++) {
		$('<div><div class="ui-draggable type-' + (x % 11) + '">' + x + '</div></div>')
			.data('data', x)
			.appendTo('#cardPile');
	}

	$('#cardPile div div').draggable({
		cursor: 'move',
		revert: function (event, ui) {
			// Thanks to http://stackoverflow.com/a/5848800
			// return boolean
			// that evaluate like this:
			// return event !== false ? false : true;
			return !event;
		}
	});

    $('#cardSlots div, #cardPile div').droppable({
		hoverClass: 'hovered',
		drop: function (event, ui) {
			var slot = $(this);
			if (slot.hasClass('ui-draggable')) slot = slot.parent();
			var card = ui.draggable;
			var fromSlot = card.data('parkedTo');
						
			if (slot.parent().attr('id') == 'cardPile') {
				// moved back
				if (!!fromSlot) {
					fromSlot.data('parked', null);
				}
				card.data('parkedTo', null);
			} else {
				// moved to slot
				if (!!slot.data('parked')) {
					card.draggable('option', 'revert', true);
					return;
				} else {
					slot.data('parked', card);
					card.data('parkedTo', slot);
				}
			}
			card.position({of: $(this), my: 'left top', at: 'left top'});
		}
	});
}


</script>

</head>
<body style="cursor: auto;">

<div id="content">
  <div id="cardPile"></div>  
  <div id="cardSlots"></div>
</div>
</body></html>