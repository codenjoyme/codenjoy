<meta charset="UTF-8">

## Вступление

Игровой demo-сервер доступен так же в интернете 24/7 в целях
ознакомления [http://codenjoy.com/codenjoy-contest](http://codenjoy.com/codenjoy-contest).

Игра с открытым исходным кодом. Для реализации своей игры, исправления
ошибок в текущей и внесения других правок необходимо для начала
[форкнуть проект](https://github.com/codenjoyme/codenjoy.git).
В корне репозитория есть описание в файле Readme.md - там описано, что делать дальше.

По возникающим вопросам, пиши в [skype alexander.baglay](skype:alexander.baglay)
или на почту [apofig@gmail.com](mailto:apofig@gmail.com).

## В чем суть игры?

Надо написать своего бота для танка (героя), который обыграет других ботов
по очкам. Вся игра при этом проходит на одном поле. Танк может
передвигаться по свободным ячейкам во все четыре стороны.
Так же танк может выстрелить снарядом, который взорвется при
попадании в препятствие. Снаряд движется быстрее танка в два раза.

За убийство врагов боту игрока начисляются очки[*](index.md#ask). 
За смерть танка начисляются штрафные очки[*](index.md#ask). 

Мертвый танк тут же появляется в random месте на поле.

Помимо обычных вражеских танков есть танки с призами. Чтобы уничтожить
такой танк надо попасть несколько[*](index.md#ask) раз. После убийства 
призового танка из него выпадает приз, который нужно подобрать. Если 
этого не сделать, то через некоторое время[*](index.md#ask) он исчезнет. 
За убийство призового танка игроку также начисляются очки[*](index.md#ask). 
Стоит быть внимательным, приз случайно можно уничтожить снарядом - 
если это случится, он так же исчезнет с поля.

Есть несколько видов призов. Каждый из которых на время дает танку
определенное преимущество:

* Подобранный во время игры приз `PRIZE_IMMORTALITY` делает танк 
  игрока неуязвимым к вражеским снарядам. 
* А приз `PRIZE_WALKING_ON_WATER` даст возможность ходить по воде. 
* Приз `PRIZE_BREAKING_WALLS` позволит пробивать стены. 
* Приз `PRIZE_VISIBILITY` дает возможность прятать тeхнику под деревьями. 
* Приз `PRIZE_NO_SLIDING` дает возможность предотвратить занос 
  при движении на льду. Если действие приза окончено, а танк находится 
  на льду, то всё будет так как будто ты только что туда въехал.

Приз действует некоторое время. Каждый четный тик игры приз 'мерцает' символом `PRIZE`.

Очки суммируются. Побеждает игрок с большим числом очков (до условленного 
времени).

[*](index.md#ask)Точное количество очков за любое действие на
данный момент игры уточни у Сенсея.

## Подключение к серверу

Итак, игрок [регистрируется на сервере](../../../register?gameName=battlecity),
указывая свой email.

Далее необходимо подключиться из кода к серверу через websocket.
[Эта подборка](https://github.com/codenjoyme/codenjoy-clients.git)
клиентов для разных языков программирования тебе поможет в твоей игре.
Как запустить клиент смотри в корне проекта в файле README.md.

Если ты не можешь найти свой язык - придется написать свой клиент
(а после пошарить с нами на почту [apofig@gmail.com](mailto:apofig@gmail.com))

Адрес для подключения к игре на сервере выглядит так (ты можешь скопировать его
из игровой комнаты):

`https://[server]/codenjoy-contest/board/player/[user]?code=[code]`

Тут `[server]` - домен или ip-адрес игрового сервера, `[user]` - id игрока, a `[code]` -
твой security token. Убедись что код хранится в тайне, иначе любой участник
сможет играть от твоего имени.

## Формат сообщений

После подключения клиент будет регулярно (каждую секунду) получать строку
символов — с закодированным состоянием поля. Формат таков:

`^board=(.*)$`

C помощью этого regexp можно выкусить строку доски.

## Пример поля

Вот пример строки от сервера:

<pre>board=☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼             ☼☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼☼ ╬ ╬ ╬ ╬ ╬˅╬ ☼☼ ╬ ╬˂╬ ╬ ╬ ╬ ☼☼ ╬ ╬ ╬ ╬ ╬•╬ ☼☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼☼ ╬ ╬ ╠ ╬ ╬ ╬ ☼☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼☼ ╬▲╬ ╬ ╬ ╬ ╬ ☼☼             ☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼</pre>

Длинна строки равна площади поля `N*N`. Если вставить символ
переноса строки каждые `N=sqrt(length(string))` символов, то
получится читабельное изображение поля.


<pre>☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼
☼             ☼
☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼
☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼
☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼
☼ ╬ ╬ ╬ ╬ ╬˅╬ ☼
☼ ╬ ╬˂╬ ╬ ╬ ╬ ☼
☼ ╬ ╬ ╬ ╬ ╬•╬ ☼
☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼
☼ ╬ ╬ ╠ ╬ ╬ ╬ ☼
☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼
☼ ╬ ╬ ╬ ╬ ╬ ╬ ☼
☼ ╬▲╬ ╬ ╬ ╬ ╬ ☼
☼             ☼
☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼</pre>


Первый символ строки соответствует ячейке расположенной в
левом верхнем углу и имеет координату `[0, 29]`.
Координата `[0, 0]` соответствует левому нижнему углу.
В этом примере — позиция танка (символ `▲`) — `[3, 2]`, 
а снаряда (символ `•`) - `[11, 7]`.

## Расшифровка символов

Расшифровку символов ты можешь [найти тут](elements.md).

## Как играть?

Игра пошаговая, каждую секунду сервер посылает твоему клиенту
состояние обновленного поля на текущий момент и ожидает ответа
команды герою. За следующую секунду игрок должен успеть дать
команду герою. Если не успел — герой стоит на месте.

Твоя цель заставить героя двигаться в соответствии с задуманным тобой алгоритмом.
Герой на поле должен уметь зарабатывать так много очков, как только сможет.
Основная цель игры - обыграть по очкам всех соперников.

## Команды управления

Команд несколько:
* `UP`, `DOWN`, `LEFT`, `RIGHT` – приводят к развороту и
  передвижению танка в заданном направлении на 1 клетку.
* `ACT` - выстрел снаряда. 
* Команды движения можно комбинировать с командами выстрела, 
  разделяя их через запятую – это значит что за один такт игры 
  будет выстрел, а потом движение `LEFT,ACT` или наоборот `ACT,LEFT`.

## Настройки

Параметры будут меняться[*](index.md#ask) по ходу игры.

## Кейзы

## <a id="ask"></a> Спроси Сенсея

Параметры могут изменяться по ходу игры. Настройки текущей игры
ты сможешь всегда [подглядеть тут](/codenjoy-contest/rest/settings/player).
Пожалуйста, спроси у Сенсея как интерпретировать эти данные. Ты можешь найти Сенсея
в чате, который подготовили организаторы для обсуждения вопросов.

## Подсказки

Первостепенная задача – написать websocket клиента, который подключится
к серверу. Затем заставить героя слушаться команды. Таким образом,
игрок подготовится к завтрашней игре. Вторая задача – вести
осмысленную игру и победить.

Если ты не знаешь с чего начать, попробуй реализовать следующие алгоритмы:

* Перейти в случайную пустую соседнюю ячейку.
* Продвинуться вперед в свободную клетку в направлении ближайшего приза.
* Попробуй спрятаться от пуль.
* Попробуй избежать ботов и других героев.
* Попробуй стрелять в других героев.

## Клиент и API

Сейчас реализованы клиенты для игры для некоторых языков программирования.
Другие языки в процессе написания (спасибо игрокам-активистам!).

Слишком много форы клиентский код не дает играющим, поскольку в этом коде
еще надо разобраться, но там реализована логика общения с сервером +
некоторое высокоуровневое API для работы с доской (что уже приятно).

Все языки так или иначе имеют похожий набор методов:

* `Solver`
  Пустой класс с одним методом — ты должен(должна) наполнить его умной логикой.
* `Direcion`
  Возможные направления движения для этой игры.
* `Point`
  `x`, `y` координаты.
* `Element`
  Тип элемента на доске.
* `Board` - инкапсулирует логику для удобного поиска и манипуляции элементами на поле.

## Как провести такой же ивент самостоятельно?

Перед тобой opensource проект. Для реализации своей новой игры, модификации этой игры,
любой другой модификации сервера или исправления найденной ошибки
[форкни проект](https://github.com/codenjoyme/codenjoy.git).
Все инструкции ты найдешь в Readme.md файлах - они подскажут, что делать дальше.

Если у тебя есть вопросы - прошу, задавай их мне
в [скайпе alexander.baglay](skype:alexander.baglay)
или по почте [apofig@gmail.com](mailto:apofig@gmail.com).

Удачи и пусть победит сильнейший! 