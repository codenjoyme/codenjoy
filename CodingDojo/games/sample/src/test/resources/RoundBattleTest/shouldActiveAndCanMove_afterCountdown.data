
before()
    settings().bool(ROUNDS_ENABLED, true)
    settings().integer(ROUNDS_TIME_BEFORE_START, 5)
    settings().integer(ROUNDS_PER_MATCH, 3)
    settings().integer(ROUNDS_MIN_TICKS_FOR_WIN, 1)
    settings().integer(ROUNDS_TIME, 10)
    settings().integer(ROUNDS_TIME_FOR_WINNER, 2)

shouldActiveAndCanMove_afterCountdown()
    settings().integer(ROUNDS_PLAYERS_PER_ROOM, 3)
    givenFl(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ ☺  ☼
        ☼☺☺  ☼
        ☼☼☼☼☼☼)
        givenPlayer([2,2])
            dice(2, 2)
        givenPlayer([1,1])
            dice(1, 1)
        givenPlayer([2,1])
            dice(2, 1)
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ X  ☼
        ☼YY  ☼
        ☼☼☼☼☼☼,
        0)
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ Y  ☼
        ☼XY  ☼
        ☼☼☼☼☼☼,
        1)
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ Y  ☼
        ☼YX  ☼
        ☼☼☼☼☼☼,
        2)
    events().verifyAllEvents(, [])
    tick()
    events().verifyAllEvents(
        listener(0) => [[....4....]]
        listener(1) => [[....4....]]
        listener(2) => [[....4....]],
        [])
    tick()
    events().verifyAllEvents(
        listener(0) => [[...3...]]
        listener(1) => [[...3...]]
        listener(2) => [[...3...]],
        [])
    tick()
    events().verifyAllEvents(
        listener(0) => [[..2..]]
        listener(1) => [[..2..]]
        listener(2) => [[..2..]],
        [])
    tick()
    events().verifyAllEvents(
        listener(0) => [[.1.]]
        listener(1) => [[.1.]]
        listener(2) => [[.1.]],
        [])
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ X  ☼
        ☼YY  ☼
        ☼☼☼☼☼☼,
        0)
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ Y  ☼
        ☼XY  ☼
        ☼☼☼☼☼☼,
        1)
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ Y  ☼
        ☼YX  ☼
        ☼☼☼☼☼☼,
        2)
    hero(0).up()
    hero(1).right()
    hero(2).up()
    tick()
    events().verifyAllEvents(
        listener(0) => [START_ROUND, [Round 1]]
        listener(1) => [START_ROUND, [Round 1]]
        listener(2) => [START_ROUND, [Round 1]],
        [])
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ ☺  ☼
        ☼☻☻  ☼
        ☼☼☼☼☼☼,
        0)
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ ☻  ☼
        ☼☺☻  ☼
        ☼☼☼☼☼☼,
        1)
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼    ☼
        ☼ ☻  ☼
        ☼☻☺  ☼
        ☼☼☼☼☼☼,
        2)
    hero(0).up()
    hero(1).up()
    hero(2).right()
    tick()
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼ ☺  ☼
        ☼☻   ☼
        ☼  ☻ ☼
        ☼☼☼☼☼☼,
        0)
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼ ☻  ☼
        ☼☺   ☼
        ☼  ☻ ☼
        ☼☼☼☼☼☼,
        1)
    assertF(
        ☼☼☼☼☼☼
        ☼    ☼
        ☼ ☻  ☼
        ☼☻   ☼
        ☼  ☺ ☼
        ☼☼☼☼☼☼,
        2)

after()
    events().verifyNoEvents([])