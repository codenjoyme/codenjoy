<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="css/reset.css" rel="stylesheet"/>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="bootstrap/css/bootstrap-theme.min.css" rel="stylesheet"/>
    <link href="fonts/font-awesome-4.6.3/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="css/registration-style.css" rel="stylesheet"/>
    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/jquery.md5.js"></script>
    <script>
        $(document).ready(function () {
            var validation = function(id, onCheck) {
                var element = $('#' + id);
                var validateElement = function() {
                    var value = element.find('input').val();
                    if (onCheck(value)) {
                        element.addClass('not-valid');
                        element.removeClass('valid');
                    } else {
                        element.addClass('valid');
                        element.removeClass('not-valid');
                    }
                }
                element.keyup(validateElement);
                element.focus(validateElement);
                element.blur(validateElement);
                element.mousedown(validateElement);
                validateElement();
            }

            var validateEmail = function(email) {
                var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                return emailReg.test(email);
            }
            validation('email', function(value) {
                return value == '' || !validateEmail(value);
            });
            validation('password', function(value) {
                return value == '' || value.length == 0;
            });
            validation('skills', function(value) {
                return value == '';
            });

            var submitForm = function() {
                if ($('form .not-valid').length == 0) {
                    $("#password input").val($.md5($("#password input").val()));
                    $("#form").submit();
                }
            }

            $('#submit-button').click(submitForm);
            $('#email, #password, #skills').keypress(function(e) {
                var code = (e.keyCode ? e.keyCode : e.which);
                if (code == 13) {
                    submitForm();
                    e.preventDefault();
                }
            });
        });
    </script>
  </head>
  <body>
    <div class="header-container">
      <div class="container-fluid">
      <header class="header row">
            <div class="col-md-5">
              <a class="logo inline" href="#" title="Home"><img src="img/logo.png"></a><span class="title">EngX&nbsp;&nbsp;&nbsp;&nbsp;I can code</span>
              </div>
            <nav class="nav col-md-6 pull-right text-right">
            <ul class="nav-list">
				<li class="nav-item inline"><a href="/codenjoy-contest/resources/icancode/landing.html">home</a></li>
                <!--li class="nav-item inline">help</li-->
				<li class="nav-item inline"><img src="img/profile.png"></li>
                <li class="nav-item inline"><a href="/codenjoy-contest/resources/icancode/registration.html">Log out</a></li>
            </ul>
        </nav>
      </header>
    </div>
    </div>
    <div class="container-fluid">
      <form class="form-registr" id="form" action="/codenjoy-contest/register" method="POST">
        <h2 class="form-title">Sign up</h2>
        <div class="inputs">
          <div id="email" class="field not-valid">
            <input type="email" placeholder="Email address (valid)" name="name"/>
            <span class="icon fa"></span>
          </div>	  			
          <div id="password" class="field not-valid">
            <input type="password" placeholder="Password" name="password"/>
            <span class="icon fa"></span>
          </div>
		  <div id="skills" class="field not-valid">
            <input type="text" placeholder="Type your main tech skills" name="data"/>
            <span class="icon fa"></span>
          </div>
		  <input type="hidden" name="gameName" value="icancode"/>
          <button class="btn-submit" id="submit-button" type="button">Sign up</button>
        </div>
      </form>
    </div>
    <footer class="footer">
      <div class="container-fluid">
        <nav class="footer-nav">
          <ul class="footer-list">
            <li class="footer-item inline"><a href="http://epa.ms/ENGX">http://epa.ms/ENGX</a></li>
            <li class="footer-item inline"><a href="http://epa.ms/DOJO">http://epa.ms/DOJO</a></li>
            <li class="footer-item inline"><a href="http://epa.ms/ENGXYAMMER">http://epa.ms/ENGXYAMMER</a></li>
          </ul>
        </nav>
      </div>
    </footer>

  </body>
</html>
