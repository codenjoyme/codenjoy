<!DOCTYPE html>
<!--
  #%L
  iCanCode - it's a dojo-like platform from developers to developers.
  %%
  Copyright (C) 2016 EPAM
  %%
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public
  License along with this program.  If not, see
  <http://www.gnu.org/licenses/gpl-3.0.html>.
  #L%
  -->

<html lang="en">
  <head>
    <title>I can code | contest: Rules</title>
    <link href="css/reset.css" rel="stylesheet" />
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="fonts/font-awesome-4.6.3/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="css/landing-style.css" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <script src="js/jquery/jquery-3.1.0.js"></script>
    <script src="js/plugins-scroll.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
          $('.dropdown-toggle').dropdown();
            var url = '/codenjoy-contest/resources/icancode/registration.html';
            $('.go-registration').click(function() {
               window.location.href = url;
            });

          $('#logo').dblclick(function() {
                var time = 256000;
                var body = $("html, body");

                body.animate({ scrollTop: $(document).height() }, time, 'linear');
                setTimeout(function() {
                    body.animate({scrollTop:0}, time, 'linear');
                },time);
                setInterval(function(){
                    body.animate({ scrollTop: $(document).height() }, time, 'linear');
                    setTimeout(function() {
                        body.animate({scrollTop:0}, time, 'linear');
                    },time);
                },time*2);
          });

          $("#nav").on("click","a", function (event) {
              event.preventDefault();
              var id = $(this).attr('href'),
              top = $(id).offset().top;
              $('body,html').animate({scrollTop: top}, 1000);
          });

          try {
              $.browserSelector();
              if($("html").hasClass("chrome")) {
                  $.smoothScroll();
              }
          } catch(err) {

          };

          $('#scrollup').mouseover( function(){
              $( this ).animate({opacity: 0.8},100);
          }).mouseout( function(){
              $( this ).animate({opacity: 0.5},100);
          }).click( function(){
              window.scroll(0 ,0);
              return false;
          });

          $(window).scroll(function(){
              if ( $(document).scrollTop() > 0 ) {
                  $('#scrollup').fadeIn('fast');
              } else {
                  $('#scrollup').fadeOut('fast');
              }
          });

          var replaceHost = function(where, replacement) {
             var oldHost = $('#' + where).html();
             var newHost = oldHost.split('server:8080').join(replacement);
             $('#' + where).html(newHost);
          }

          var host = window.location.hostname + ':' + window.location.port;
          if (host == ':') {
              host = '127.0.0.1:8080';
          }
          replaceHost('registration-page', host);
          replaceHost('connection-line', host);
          replaceHost('start-code', host);
        });
    </script>
  </head>
  <body>
    <div class="wrapper wrapper-rules">
      <div class="header-wrap">
        <div class="container">
		<header class="header row">
          <div class="col-md-6 col-xs-12">
            <a class="logo-epam inline" target="_blank" href="https://www.epam.com/" title="Epam"><img src="img/epam_logo.jpg"></a>
            <div class="logo-engx inline" href="#" title="EngX" title="Home page"><img id="logo" src="img/engx_logo.jpg"><span class="logo-title"><span class="text-uppercase after-line">EPAM EngX</span>iCanCode</span></div>
          </div>
          <h1 class="nav col-md-6 col-xs-12 text-right rules-title">
            <div class="dropdown navbar-right" id="nav">
              <div class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="rules dr">iCanCode</span> <span></span>Rules<span class="caret"></span></div>
               <ul class="dropdown-menu">
                <li class="text-right"><a href="#overview">Game overview</a></li>
                <li class="text-right"><a href="#command">Command methods</a></li>
                <li class="text-right"><a href="#direction">Direction methods</a></li>
                 <li class="text-right"><a href="#point">Point methods</a></li>
                 <li class="text-right"><a href="#core">Core board methods</a></li>
              </ul>
            </div>
          </h1>
		</header>
      </div>
      </div>
      
 <section class="section rules-section">
        <div class="container">
          <h1 class="title text-uppercase">What you should know about the game?</h1>
          <a id="overview"></a>
          <h2 class="subtitle text-uppercase">game overview</h2>
            <p>Select your language and <a class="load-link" href="/codenjoy-contest/resources/user/icancode-servers.zip">download client</a>: Java or Kotlin.
                Then:</p>
            <ul class="list">
                <li><span class="list-values">Install Java - JDK 7</span></li>
                <li><span class="list-values">Create JAVA_HOME environment variable</span></li>
                <li><span class="list-values">Install Maven3</span></li>
                <li><span class="list-values">Create M2_HOME environment variable</span></li>
                <li><span class="list-values">Add to the Path environment variable <span class="func">;%JAVA_HOME%/bin;%M2_HOME%/bin</span></span></li>
                <li><span class="list-values">Check that command should return version of java <span class="func">java -version</span></span></li>
                <li><span class="list-values">Check that command should return version of maven and java <span class="func">mvn -version</span></span></li>
                <li><span class="list-values">Open in browser <span class="func" id="registration-page">http://server:8080/codenjoy-contest</span></span></li>
                <li><span class="list-values">Register your game (you shuld select <span class="func">iCanCode Contest</span> on registration)</span></li>
                <li><span class="list-values">Change console font to 'Courier New': File -> Settings -> Console font -> Scheme save as 'Default copy' -> Primary font Select 'Courier New' -> Apply</span></li>
                <li><span class="list-values">Change ide font to 'Courier New': File -> Settings -> Console font -> Scheme save as 'Default copy' -> Primary font Select 'Courier New' -> Apply</span></li>
                <li><span class="list-values">Go to YourSoljer.java (or YourSolver.kt for Kotlin)</span></li>
                <li><span class="list-values">Set your email in the <span class="func" id="connection-line">start("your@email.com", "server:8080", new YourSolver());</span></span></li>
                <li><span class="list-values">Run YourSolver as main application</span></li>
                <li><span class="list-values">Check in the console that client connected</span></li>
                <li><span class="list-values">Do your changes in the YourSolver method <span class="func">Command whatToDo(Board board)</span></span></li>
                <li><span class="list-values">Write your unit tests</span></li>
                <li><span class="list-values">Read help at this page bollow</span></li>
                <li><span class="list-values">Restart java process when you want</span></li>
                <li><span class="list-values">When finish run build-client.bat and send folder .\out\ to the DojoSensei</span></li>
                <li><span class="list-values">Codenjoy!</span></li>
            </ul>

            <p>Robot asks for new orders every second. He should know where to go.
Help him to collect gold and bring it to finish point - write program and win the contest.
Send program to Robot by running the YourSolver class as Main Application. 
              Before that check that your email that you enter on registration page is on main method.</p>
<pre id="start-code">    /**
     * Run this method for connect to Server
     */
    public static void main(String[] args) {
        start("your@email.com", "server:8080", new YourSolver());
    }</pre>

          <p>The code in YourSolver class looks like the below and will be executed each step (every second):</p>
<pre>    /**
     * @param board use it for find elements on board
     * @return what hero should do in this tick (for this board)
     */
    @Override
    public Command whatToDo(Board board) {
        if (!board.isMeAlive()) return Command.doNothing();

        if (!board.isMeAlive()) return doNothing();

        List&lt;Point&gt; goals = board.getGold();
        if (goals.isEmpty()) {
            goals = board.getExits();
        }
        List&lt;Direction&gt; shortestWay = board.getShortestWay(goals);
        if (shortestWay.isEmpty()) {
            return doNothing();
        }

        Direction direction = shortestWay.get(0);
        return go(direction);
    }</pre>

        <p>Robot can detect walls and other obstacles on board with help of Board class.
        <p>Board can contain the following objects:</p>
        <ul class="list">
            <li><span class="list-values text-uppercase">start</span> - <span class="list-values">Starting point. Rebirth place.</span></li>
            <li><span class="list-values text-uppercase">exit</span> - <span class="list-values"> Finishing point. Bring money here.</span></li>
            <li><span class="list-values text-uppercase">wall</span> - <span class="list-values"> Board border. It's impossible to jump over it</span></li>
            <li><span class="list-values text-uppercase">hole</span> - <span class="list-values"> Hole on the floor. Robot will die, if he steps on it. </span></li>
            <li><span class="list-values text-uppercase">box</span> - <span class="list-values"> A barrier which can be moved. Robot can jump over it. </span></li>
            <li><span class="list-values text-uppercase">gold</span> - <span class="list-values"> You should collect it and bring to finish point.</span></li>
            <li><span class="list-values text-uppercase">my_robot</span> - <span class="list-values"> It's  your robot. Help him to collect gold and bring it to finish point.</span></li>
            <li><span class="list-values text-uppercase">other_robot</span> - <span class="list-values"> Other players' robot</span></li>
            <li><span class="list-values text-uppercase">laser_machine</span> - <span class="list-values"> Laser machine produces laser beams which can kill robots if intersect him.</span></li>
            <li><span class="list-values text-uppercase">laser_machine_ready</span> - <span class="list-values"> In this state laser tells you that next tick it will issue a deadly beam.</span></li>
            <li><span class="list-values text-uppercase">laser</span> - <span class="list-values"> Laser beam is moving in given direction.</span></li>
        </ul>
        <p>For check all board elements please check Elements enum</p>
<pre>public enum Elements implements CharElements {
    // empty space where player can go
    EMPTY(LAYER2, '-'),
    FLOOR(LAYER1, '.'),

    // walls
    ANGLE_IN_LEFT(LAYER1, '╔'),
    WALL_FRONT(LAYER1, '═'),
    ANGLE_IN_RIGHT(LAYER1, '┐'),
    WALL_RIGHT(LAYER1, '│'),
    ANGLE_BACK_RIGHT(LAYER1, '┘'),
    WALL_BACK(LAYER1, '─'),
    ANGLE_BACK_LEFT(LAYER1, '└'),
    WALL_LEFT(LAYER1, '║'),
    WALL_BACK_ANGLE_LEFT(LAYER1, '┌'),
    WALL_BACK_ANGLE_RIGHT(LAYER1, '╗'),
    ANGLE_OUT_RIGHT(LAYER1, '╝'),
    ANGLE_OUT_LEFT(LAYER1, '╚'),
    SPACE(LAYER1, ' '),

    // laser machine
    LASER_MACHINE_CHARGING_LEFT(LAYER1, '˂'),
    LASER_MACHINE_CHARGING_RIGHT(LAYER1, '˃'),
    LASER_MACHINE_CHARGING_UP(LAYER1, '˄'),
    LASER_MACHINE_CHARGING_DOWN(LAYER1, '˅'),

    // lase machine ready
    LASER_MACHINE_READY_LEFT(LAYER1, '◄'),
    LASER_MACHINE_READY_RIGHT(LAYER1, '►'),
    LASER_MACHINE_READY_UP(LAYER1, '▲'),
    LASER_MACHINE_READY_DOWN(LAYER1, '▼'),

    // other stuff
    START(LAYER1, 'S'),
    EXIT(LAYER1, 'E'),
    HOLE(LAYER1, 'O'),
    BOX(LAYER2, 'B'),
    GOLD(LAYER1, '$'),

    // your robot
    ROBO(LAYER2, '☺'),
    ROBO_FALLING(LAYER2, 'o'),
    ROBO_FLYING(LAYER2, '*'),
    ROBO_FLYING_ON_BOX(LAYER2, '№'),
    ROBO_LASER(LAYER2, '☻'),

    // other robot
    ROBO_OTHER(LAYER2, 'X'),
    ROBO_OTHER_FALLING(LAYER2, 'x'),
    ROBO_OTHER_FLYING(LAYER2, '^'),
    ROBO_OTHER_FLYING_ON_BOX(LAYER2, '%'),
    ROBO_OTHER_LASER(LAYER2, '&'),

    // laser
    LASER_LEFT(LAYER2, '←'),
    LASER_RIGHT(LAYER2, '→'),
    LASER_UP(LAYER2, '↑'),
    LASER_DOWN(LAYER2, '↓')
}</pre>

        <p>Robot can walk, jump over holes and lasers and pull boxes with the following code:</p>
          
<pre>public Command whatToDo(Board board) {
    return Command.go("RIGHT");
    // return Command.jump("RIGHT");
    // return Command.pull("RIGHT");
}</pre>
          <p>You can use this method to detect Elements throughout the world:</p>
          
<pre>if (board.isAt(4, 8, Elements.HOLE)) {
    // some statement here
}</pre>
          <p>Coordinate {x:0, y:0} in the left-top corner of board.</p>
          <p>Try this code for check Robot position.</p>
<pre>Point me = board.getMe();
System.out.println(me);</pre>

            <p>You can use static import for good performance :).</p>
            <pre>import static com.codenjoy.dojo.client.Direction.*;
import static com.codenjoy.dojo.services.PointImpl.*;
import static com.epam.dojo.icancode.model.Elements.*;
import static com.epam.dojo.icancode.model.Elements.Layers.*;</pre>

		<p><b>Important!</b> You can change any class that you want: Board, AbstractSolver and YourSolver. Also you can wryte your own Unit test.</p>

<!-- -----------------------------------------CORE COMMAND METHODS--------------------------------------------------- -->
          <a id="command"></a>
          <h2 class="subtitle text-uppercase">Command methods</h2>
            <p>You should return Command from whatToDo method of YourSolver. There are several commands.</p>

          <p><span class="func">Command go(Direction direction)</span> - Go to the direction specified.</p>
<pre>public Command whatToDo(Board board) {
    return Command.go(Direction.RIGHT);
}</pre>
          <p><span class="func">Command jump(Direction direction)</span> - Jumps to direction specified. Jumps over a barrier in direction specified. It takes 2 ticks. After that robot moves on 2 cells on the direction. It is impossible to jump over multiple barriers in the row.</p>
<pre>public Command whatToDo(Board board) {
    return Command.jump(Direction.LEFT);
}</pre>
    	  <p><span class="func">Command jump()</span> - Jumps on a place. You should return result of this function from whatToDo method.</p>
<pre>public Command whatToDo(Board board) {
    return Command.jump();
}</pre>
          
          <p><span class="func">Command pull(Direction direction)</span> - Pulls/pushes the box to the direction. It is possible to move the box only forward or backward, “side pulling” is not allowed.</p>
<pre>public Command whatToDo(Board board) {
    return Command.pull(Direction.UP);
}</pre>
    
<!-------------------------------------------------------Core Direction methods--------------------------------------------- -->
          <a id="direction"></a>
          <h2 class="subtitle text-uppercase">Direction methods</h2>
          
          <p><span class="func">Direction direction.invert()</span> - Returns inverted direction. Inverts UP to DOWN, RIGHT to LEFT, etc.</p>
<pre>Direction direction = Direction.LEFT.inverted();
assert direction.inverted() == Direction.RIGHT;</pre>
          
          <p><span class="func">Direction direction.clockwise()</span> - Returns next clockwise direction. LEFT -> UP -> RIGHT -> DOWN -> LEFT.</p>
<pre>assert Direction.LEFT.clockwise() == Direction.UP;</pre>

          <p><span class="func">Point direction.change(Point pt)</span> - Returns new point that will be after move from current point in given direction.</p>
<pre>assert Direction.LEFT.change(pt(1, 2)) == pt(0, 2);
// To use import static com.codenjoy.dojo.services.PointImpl.pt;</pre>

            <p><span class="func">int direction.changeX(int x)</span> - Returns new point.x that will be after move from current point.x in given direction.</p>
<pre>assert Direction.RIGHT.changeX(1) == 2;
assert Direction.LEFT.changeX(1) == 0;</pre>

            <p><span class="func">int direction.changeY(int y)</span> - Returns new point.y that will be after move from current point.y in given direction. Remember, that coordinate {x:0, y:0} in the left-top corner of board.</p>
            <pre>assert Direction.DOWN.changeY(1) == 2;
assert Direction.UP.changeY(1) == 0;</pre>

        <!-------------------------------------------------------Core Point methods--------------------------------------------- -->
          <a id="point"></a>
        <h2 class="subtitle text-uppercase">Point methods</h2>

        <p><span class="func">new PointImpl(int x, int y)</span> - Creates new point objects with given x and y.</p>
        <pre>Point pt1 = new PointImpl(1, 2);
Point pt2 = pt(1, 2); // To use import static com.codenjoy.dojo.services.PointImpl.pt;
assert pt1.eqals(pt2);</pre>

            <p>Please check com.codenjoy.dojo.services.Point for more details.</p>

<!-- -----------------------------------------------------Core Board methods--------------------------------------------- -->
          <a id="core"></a>
          <h2 class="subtitle text-uppercase">Core Board methods</h2>
          
          <p><span class="func">boolean isAt(int numLayer, int x, int y, Elements... elements))</span> - Says if at given position (X, Y) at given Layer has given elements.</p>
          <pre>assert board.isAt(LAYER1, 3, 4, HOLE, START);
assert board.isAt(LAYER2, 1, 2, HERO, OTHER_HERO);</pre>

          <p><span class="func">boolean isAt(int numLayer, int x, int y, Elements element))</span> - Says if at given position (X, Y) at given layer has given element.</p>
          <pre>assert board.isAt(LAYER1, 3, 4, HOLE);
assert board.isAt(LAYER2, 1, 2, HERO);</pre>

          <p><span class="func">boolean isNear(int numLayer, int x, int y, E element)</span> - Says if near (at left, at right, at up, at down) given position (X, Y) at given layer exists given element.</p>
          <pre>assert board.isNear(LAYER1, 1, 2, HOLE);</pre>
          
          <p><span class="func">Point getMe()</span> - Returns position of your robot.</p>
          <pre>Point me = board.getMe();
assert me.equals(pt(1, 2));</pre>

          <p><span class="func">List&lt;Point&gt; getOtherHeroes()</span> - Returns position of your robot.</p>
          <pre>List&lt;Point&gt; heroes = board.getOtherHeroes();
assert heroes.get(0).equals(pt(1, 2));</pre>

          <p><span class="func">Elements getAt(int numLayer, int x, int y) </span> - Returns element at position specified.</p>
          <pre>assert board.getAt(LAYER1, 1, 2) == HERO</pre>
          
          <p><span class="func">List&lt;Point&gt; get(int numLayer, Elements... elements)</span> - Returns all positions of element specified.</p>
          <pre>assert board.get(LAYER1, HOLE, START).get(0).equals(pt(1, 2));</pre>
          
          <p><span class="func">int countNear(int numLayer, int x, int y, Elements element)</span> - Returns count of elements with type specified near (at left, at right, at up, at down) {x,y} point.</p>
          <pre>assert board.countNear(LAYER1, 1, 2, HOLE) == 1;</pre>
          
          <p><span class="func">List&lt;Elements&gt; getNear(int numLayer, int x, int y)</span> - All elements around (at left, right, down, up, left-down, left-up, right-down, right-up) position.</p>
          <pre>assert scanner.getNear(LAYER1, 1, 2, OTHER_HERO).get(0).equals(pt(1, 2));</pre>
          
          <p><span class="func">boolean isBarrierAt(int x, int y)</span> - Is it possible to go through the cell with {x,y} coordinates.</p>
          <pre>assert scanner.isBarrierAt(12, 7) == false;</pre>

          <p><span class="func">boolean isMeAlive()</span> - Checks if your robot is alive.</p>
          <pre>assert scanner.isMyRobotAlive() = true; </pre>
          
          <p><span class="func">List&lt;Point&gt; getOtherHeroes()</span> - Returns list of coordinates for all visible enemy Robots. There are corresponding functions for each type of elements: getLaserMachines, getLasers, getWalls,  getBoxes,  getGold,  getStarts,  getExits, getHoles</p>
          <pre>List&lt;Point&gt; points = board.getOtherRobots();
assert points.get(0).equals(pt(1, 2));</pre>
          
          <p><span class="func">List&lt;Direction&gt; getShortestWay(List&lt;Point&gt; to)</span> - Return shortest path (list of directions where to move) from your robot location to coordinates specified.</p>
          <pre>Point destination = pt(2, 4);
List&lt;Direction&gt; path = board.getShortestWay(Arrays.asList(destination));
assert path.equals(Arrays.asList(UP, DOWN, DOWN, LEFT));</pre>
        </div>    
      </section>
      
      <footer class="footer">
        <div class="container">
          <nav class="footer-nav">
            <ul class="footer-list inline">
                <li class="footer-item inline"><a href="https://epa.ms/dojo-habr">About EPAM-DOJO</a></li>
                <li class="footer-item inline"><a href="https://epa.ms/codenjoy-github">Codenjoy on GitHub</a></li>
                <li class="footer-item inline"><a href="mailto:Oleksandr_Baglai@Epam.com">Ask me anything</a></li>
            </ul>
      </nav>
        </div>
      </footer>
    </div>
    <div class="scroll-up" id="scrollup"><i class="fa fa-angle-up"></i></div>
  </body>
</html>